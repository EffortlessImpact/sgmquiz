<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Aligned Visibility Quiz - Discover Your Business Archetype</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Flodesk Script -->
    <script>
      (function(f, l, o, w, d, e, s, k) {
        if (f[o]) return;
        f[o] = function() { (f[o].q = f[o].q || []).push(arguments) };
        (d = l.createElement(w)).async = 1; d.src = e; (s = l.getElementsByTagName(w)[0]).parentNode.insertBefore(d, s);
      })(window, document, 'fd', 'script', null, 'https://fd-serve.azurewebsites.net/fd.js');
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            color: #37474f;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .quiz-page h1 {
            font-family: 'Oswald', sans-serif;
            font-size: 3em;
            font-weight: 700;
            color: #607d8b;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-family: 'Open Sans', sans-serif;
            font-size: 1.4em;
            color: #78909c;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 400;
        }
        
        /* Results Page Styles */
        .results-page {
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .results-header h1 {
            font-family: 'Oswald', sans-serif;
            color: #607d8b;
            margin-bottom: 20px;
            font-size: 2.2em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .archetype-badge {
            background: #607d8b;
            color: white;
            padding: 20px 40px;
            border-radius: 4px;
            display: inline-block;
            margin: 10px 0;
            box-shadow: 0 4px 12px rgba(96, 125, 139, 0.3);
        }
        
        .archetype-badge h2 {
            margin: 0;
            font-size: 2em;
            font-weight: bold;
        }
        
        .archetype-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .description-section,
        .traits-section,
        .next-steps-section,
        .cta-section {
            background: white;
            padding: 30px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #607d8b;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .description-section h3,
        .traits-section h3,
        .next-steps-section h3,
        .cta-section h3 {
            font-family: 'Oswald', sans-serif;
            color: #607d8b;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #traitsList {
            list-style: none;
            padding: 0;
        }
        
        #traitsList li {
            background: #eceff1;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 4px;
            border-left: 3px solid #607d8b;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: #546e7a;
        }
        
        .cta-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .cta-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            flex: 1;
            min-width: 150px;
        }
        
        .cta-btn:hover {
            transform: translateY(-2px);
        }
        
        .cta-btn.primary {
            background: #607d8b;
            color: white;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .cta-btn.secondary {
            background: #eceff1;
            color: #607d8b;
            border: 2px solid #cfd8dc;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .confirmation-notice {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .check-icon {
            font-size: 2em;
        }
        
        .confirmation-notice p {
            margin: 0;
        }
        
        .question {
            margin-bottom: 35px;
            padding: 30px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #607d8b;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .question h3 {
            font-family: 'Oswald', sans-serif;
            color: #607d8b;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .options {
            margin-top: 15px;
        }
        
        .option {
            margin: 12px 0;
            display: flex;
            align-items: center;
        }
        
        .option input[type="radio"],
        .option input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
            accent-color: #607d8b;
        }
        
        .option label {
            cursor: pointer;
            padding: 8px 0;
            flex: 1;
        }
        
        .option label {
            color: #546e7a;
        }
        
        .option label:hover {
            color: #607d8b;
        }
        
        .submit-btn {
            display: block;
            width: 100%;
            padding: 18px 45px;
            background: #607d8b;
            color: white;
            border: none;
            border-radius: 4px;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 40px;
            box-shadow: 0 4px 12px rgba(96, 125, 139, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.7s;
        }
        
        .submit-btn:hover {
            background: #546e7a;
            box-shadow: 0 6px 16px rgba(96, 125, 139, 0.4);
        }
        
        .submit-btn:hover:before {
            left: 100%;
        }
        
        .submit-btn:disabled {
            background: #cfd8dc;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .submit-btn:disabled:before {
            display: none;
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .result h2 {
            margin-top: 0;
            font-size: 2em;
        }
        
        .result p {
            font-size: 1.1em;
            margin-bottom: 0;
        }
        
        .no-match {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
        }
        
        header {
            text-align: center;
            padding: 0;
            animation: fadeInDown 0.8s ease-out;
            position: relative;
        }
        
        .banner {
            width: 100%;
            height: 400px;
            margin: 0;
            border-radius: 0;
            overflow: hidden;
            box-shadow: none;
            position: relative;
            background: linear-gradient(rgba(96, 125, 139, 0.7), rgba(84, 110, 122, 0.7));
        }
        
        .banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0.8;
        }
        
        .logo-overlay {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }
        
        .logo-overlay img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }
        
        .hero {
            background: white;
            border-radius: 0;
            padding: 80px 60px 60px;
            margin: 0;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: none;
            animation: fadeInUp 0.8s ease-out 0.2s both;
            position: relative;
        }
        
        .badge {
            display: inline-block;
            background: rgba(96, 125, 139, 0.1);
            color: #607d8b;
            padding: 6px 16px;
            border-radius: 3px;
            font-family: 'Oswald', sans-serif;
            font-size: 0.85em;
            font-weight: 500;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .debug {
            margin-top: 20px;
            padding: 15px;
            background: #edf2f7;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9em;
            display: none;
        }
        
        @media (max-width: 768px) {
            .quiz-page h1 {
                font-size: 2em;
            }
            
            .subtitle {
                font-size: 1.1em;
            }
            
            .hero {
                padding: 60px 20px 40px;
                margin-top: 60px;
            }
            
            .submit-btn {
                padding: 15px 40px;
                font-size: 1.1em;
            }
            
            .logo-overlay {
                left: 50%;
                transform: translateX(-50%);
                width: 70px;
                height: 70px;
                bottom: -35px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="banner">
                <img src="sgm-archetype-quiz-banner.jpg" alt="The Aligned Visibility Quiz - Woman in peaceful meditation">
            </div>
            <div class="logo-overlay">
                <img src="Beige-and-White-Aesthetic-Minimalist-Modern-Typography-Beauty-Brand-Logo.png" alt="The Aligned Visibility Quiz Logo">
            </div>
        </header>
        
        <main class="hero quiz-page">
            <div class="badge">5-Minute Quiz</div>
            <h1>The Aligned Visibility Quiz</h1>
            <p class="subtitle">Discover Your Business Archetype & Unlock Your Authentic Presence</p>
            
            <form id="archetypeForm" netlify name="archetype-quiz">
                <!-- Hidden fields for Netlify to capture results -->
                <input type="hidden" name="calculated-archetype" id="calculatedArchetype">
                <input type="hidden" name="all-responses" id="allResponses">
                
                <div class="question">
                    <h3>1. Are you looking for support in:</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q1a" name="q1" value="A">
                            <label for="q1a">Business clarity & direction</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q1b" name="q1" value="B">
                            <label for="q1b">Beauty & visibility support</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q1c" name="q1" value="C">
                            <label for="q1c">Both</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>2. Where do you feel most confident in life currently?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q2a" name="q2" value="A">
                            <label for="q2a">Home life, kids, family, hobbies</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q2b" name="q2" value="B">
                            <label for="q2b">Personal appearance and health</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q2c" name="q2" value="C">
                            <label for="q2c">Career and skills</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q2d" name="q2" value="D">
                            <label for="q2d">Everything!</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>3. What stage of business are you currently in?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q3a" name="q3" value="A">
                            <label for="q3a">Idea stage / just getting started</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q3b" name="q3" value="B">
                            <label for="q3b">Recently launched</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q3c" name="q3" value="C">
                            <label for="q3c">Been in business a while, but need new direction</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q3d" name="q3" value="D">
                            <label for="q3d">Other</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>4. What's feeling unclear, overwhelming, or jumbled right now? (Select all that apply)</h3>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="q4a" name="q4" value="A">
                            <label for="q4a">My goals</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4b" name="q4" value="B">
                            <label for="q4b">Organizing my time</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4c" name="q4" value="C">
                            <label for="q4c">Visibility</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4d" name="q4" value="D">
                            <label for="q4d">My confidence</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4e" name="q4" value="E">
                            <label for="q4e">All of the above</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>5. How do you want to be seen in business?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q5a" name="q5" value="A">
                            <label for="q5a">Calm and grounded</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q5b" name="q5" value="B">
                            <label for="q5b">Seen and confident</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q5c" name="q5" value="C">
                            <label for="q5c">Creative and inspired</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q5d" name="q5" value="D">
                            <label for="q5d">Focused and Driven</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>6. Would you like this session to include beauty/appearance-based guidance?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q6a" name="q6" value="A">
                            <label for="q6a">Yes</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q6b" name="q6" value="B">
                            <label for="q6b">No</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q6c" name="q6" value="C">
                            <label for="q6c">Maybe</label>
                        </div>
                    </div>
                </div>

            </form>

            <!-- FLODESK FORM INTEGRATION -->
            <div class="flodesk-section" style="margin-top: 60px; padding: 40px; background: linear-gradient(135deg, #f8f9fa, #eceff1); border-radius: 8px; border-left: 4px solid #607d8b;">
                <h3 style="font-family: 'Oswald', sans-serif; color: #607d8b; text-align: center; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px; font-size: 1.5em;">Get Your Complete Results</h3>
                <p style="text-align: center; color: #546e7a; margin-bottom: 30px; font-size: 1.1em; line-height: 1.7;">
                    Enter your details below to receive your detailed archetype breakdown with personalized insights and next steps delivered straight to your inbox.
                </p>
                
                <div style="background: white; padding: 30px; border-radius: 8px; margin: 20px 0;">
                    <div id="fd-form-689e112803c67004d676162c"></div>
                    <script>
                      window.fd('form', {
                        formId: '689e112803c67004d676162c',
                        containerEl: '#fd-form-689e112803c67004d676162c'
                      });
                    </script>
                </div>
                
                <p style="text-align: center; color: #78909c; font-size: 0.9em; margin-top: 20px;">
                    ✨ You'll receive your complete archetype breakdown within minutes!
                </p>
            </div>
            
            <!-- Debug Section for Testing -->
            <div class="debug-section" style="margin-top: 40px;">
                <button type="button" id="toggleDebug" class="debug-toggle" style="background: #eceff1; border: 1px solid #cfd8dc; padding: 10px 20px; border-radius: 4px; cursor: pointer; color: #607d8b; font-family: 'Open Sans', sans-serif;">
                    🐛 Show Debug - Answer Combinations for Each Archetype
                </button>
                <div id="debugCombinations" class="debug-combinations" style="display: none; margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 4px; font-family: monospace; font-size: 0.9em; line-height: 1.6;">
                    <h3 style="font-family: 'Oswald', sans-serif; color: #607d8b; margin-bottom: 20px;">Answer Combinations to Get Each Archetype:</h3>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">🎨 The Muse:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> B (Beauty & visibility support)</li>
                            <li><strong>Q2:</strong> A (Home/family life)</li>
                            <li><strong>Q3:</strong> A (Idea stage) OR B (Recently launched)</li>
                            <li><strong>Q4:</strong> E (All of the above - feeling overwhelmed!)</li>
                            <li><strong>Q5:</strong> A (Calm and grounded)</li>
                            <li><strong>Q6:</strong> A (Yes, absolutely!) OR C (Maybe...)</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">💄 The Stylist:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> C (Both business clarity and beauty support)</li>
                            <li><strong>Q2:</strong> B (Personal appearance)</li>
                            <li><strong>Q3:</strong> C (Established and growing)</li>
                            <li><strong>Q4:</strong> B (Managing my time effectively)</li>
                            <li><strong>Q5:</strong> C (Creative and expressive) OR D (Driven and strategic)</li>
                            <li><strong>Q6:</strong> B (Not really) OR C (Maybe...)</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">✏️ The Editor:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> C (Both business clarity and beauty support)</li>
                            <li><strong>Q2:</strong> A (Home/family life)</li>
                            <li><strong>Q3:</strong> A (Idea stage) OR B (Recently launched)</li>
                            <li><strong>Q4:</strong> C (Being visible and putting myself out there) OR D (Confidence in my abilities)</li>
                            <li><strong>Q5:</strong> B (Confident and polished)</li>
                            <li><strong>Q6:</strong> A (Yes, absolutely!)</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">👑 The Supermodel:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> A (Business clarity and strategy)</li>
                            <li><strong>Q2:</strong> D (Everything - I feel confident across the board)</li>
                            <li><strong>Q3:</strong> A (Idea stage) OR B (Recently launched) OR C (Established and growing)</li>
                            <li><strong>Q4:</strong> A (Clarifying my goals and direction)</li>
                            <li><strong>Q5:</strong> B (Confident and polished) OR D (Driven and strategic)</li>
                            <li><strong>Q6:</strong> A (Yes, absolutely!)</li>
                        </ul>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 4px; margin-top: 20px;">
                        <p style="margin: 0; color: #2e7d32;"><strong>💡 Testing Tip:</strong> If exact combinations don't match, the quiz uses a scoring system to find the best fit archetype based on your answers.</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Results Page - Hidden initially -->
        <div id="resultsPage" class="results-page" style="display: none;">
            <div class="results-header">
                <h1>Your Archetype Results</h1>
                <div class="archetype-badge">
                    <h2 id="archetypeName"></h2>
                </div>
            </div>

            <div class="archetype-content">
                <div class="description-section">
                    <h3>About Your Archetype</h3>
                    <p id="archetypeDescription"></p>
                </div>

                <div class="traits-section">
                    <h3 id="traitsTitle">Key Traits</h3>
                    <ul id="traitsList"></ul>
                </div>

                <div class="next-steps-section">
                    <h3>Your Next Steps</h3>
                    <div id="nextStepsContent"></div>
                </div>

                <div class="cta-section">
                    <h3>Ready to Take Action?</h3>
                    <p>Your results have been saved. We'll be in touch soon with your personalized archetype guide!</p>
                    <div class="cta-buttons">
                        <button class="cta-btn primary" onclick="window.location.reload()">Take Quiz Again</button>
                        <button class="cta-btn secondary" onclick="shareResults()">Share Results</button>
                    </div>
                </div>

                <div class="confirmation-notice">
                    <div class="check-icon">✅</div>
                    <p><strong>Submission Confirmed!</strong><br>Your responses have been recorded successfully.</p>
                </div>
            </div>
        </div>
        
        <div id="debug" class="debug">
            <strong>Debug Info:</strong><br>
            <span id="debugInfo"></span>
        </div>
    </div>

    <script>
        // Archetype calculation function
        function calculateArchetype(q1, q2, q3, q4, q5, q6) {
            // Convert q1 and q4 to arrays if they're not already
            const q1Array = Array.isArray(q1) ? q1 : [q1];
            const q4Array = Array.isArray(q4) ? q4 : [q4];
            
            // Helper function to check if array contains value
            function contains(arr, value) {
                return arr.includes(value);
            }
            
            // Rule 1: The Muse - Beauty/visibility support, home focused, early stage, overwhelmed, calm
            if (contains(q1Array, "B") && q2 === "A" && (q3 === "A" || q3 === "B") && 
                contains(q4Array, "E") && q5 === "A" && (q6 === "A" || q6 === "C")) {
                return "The Muse";
            }
            
            // Rule 2: The Stylist - Comprehensive support, appearance confident, established, time issues, creative/driven
            if (contains(q1Array, "C") && q2 === "B" && q3 === "C" && contains(q4Array, "B") &&
                (q5 === "C" || q5 === "D") && (q6 === "C" || q6 === "B")) {
                return "The Stylist";
            }
            
            // Rule 3: The Editor - Both support, home confident, early stage, visibility/confidence issues, confident image, beauty guidance
            if (contains(q1Array, "C") && q2 === "A" && (q3 === "A" || q3 === "B") &&
                (contains(q4Array, "C") || contains(q4Array, "D")) && q5 === "B" && q6 === "A") {
                return "The Editor";
            }
            
            // Rule 4: The Supermodel - Business clarity, confident in everything, goal issues, confident/driven image, beauty guidance
            if (contains(q1Array, "A") && q2 === "D" && (q3 === "A" || q3 === "B" || q3 === "C") &&
                contains(q4Array, "A") && (q5 === "B" || q5 === "D") && q6 === "A") {
                return "The Supermodel";
            }
            
            // Fallback logic - score based approach if no exact match
            let scores = {
                "The Muse": 0,
                "The Stylist": 0,
                "The Editor": 0,
                "The Supermodel": 0
            };
            
            // Score for The Muse (beauty focus, home confident, early stage, overwhelmed)
            if (contains(q1Array, "B")) scores["The Muse"] += 2;
            if (q2 === "A") scores["The Muse"] += 2;
            if (q3 === "A" || q3 === "B") scores["The Muse"] += 1;
            if (contains(q4Array, "E")) scores["The Muse"] += 2;
            if (q5 === "A") scores["The Muse"] += 1;
            if (q6 === "A" || q6 === "C") scores["The Muse"] += 1;
            
            // Score for The Stylist (comprehensive, appearance confident, established, time issues)
            if (contains(q1Array, "C")) scores["The Stylist"] += 2;
            if (q2 === "B") scores["The Stylist"] += 2;
            if (q3 === "C") scores["The Stylist"] += 2;
            if (contains(q4Array, "B")) scores["The Stylist"] += 2;
            if (q5 === "C" || q5 === "D") scores["The Stylist"] += 1;
            
            // Score for The Editor (both support, home confident, visibility issues)
            if (contains(q1Array, "C")) scores["The Editor"] += 2;
            if (q2 === "A") scores["The Editor"] += 2;
            if (q3 === "A" || q3 === "B") scores["The Editor"] += 1;
            if (contains(q4Array, "C") || contains(q4Array, "D")) scores["The Editor"] += 2;
            if (q5 === "B") scores["The Editor"] += 1;
            if (q6 === "A") scores["The Editor"] += 1;
            
            // Score for The Supermodel (business clarity, highly confident, goal-focused)
            if (contains(q1Array, "A")) scores["The Supermodel"] += 2;
            if (q2 === "D") scores["The Supermodel"] += 2;
            if (contains(q4Array, "A")) scores["The Supermodel"] += 2;
            if (q5 === "B" || q5 === "D") scores["The Supermodel"] += 1;
            if (q6 === "A") scores["The Supermodel"] += 1;
            
            // Return the archetype with the highest score
            const maxScore = Math.max(...Object.values(scores));
            const bestMatch = Object.keys(scores).find(key => scores[key] === maxScore);
            
            return bestMatch || "The Muse"; // Default to The Muse if no clear winner
        }

        // Archetype detailed information
        const archetypeDetails = {
            "The Muse": {
                description: "You're seeking beauty and visibility support while balancing home life. You're in the early stages of business but feeling overwhelmed by everything. You want to be seen as calm and grounded.",
                traits: [
                    "Values beauty and aesthetics in business",
                    "Strong connection to home and family life",
                    "Early-stage entrepreneur with big dreams",
                    "Seeks calm, grounded presence",
                    "Feels overwhelmed by multiple priorities"
                ],
                nextSteps: "Focus on creating systems that support both your business growth and home life balance. Start with one clear priority each week and build beautiful, sustainable routines."
            },
            "The Stylist": {
                description: "You want comprehensive support and feel confident in your appearance. You've been in business a while but need help organizing your time. You want to be seen as creative or driven.",
                traits: [
                    "Confident in personal appearance and health",
                    "Established business owner seeking refinement",
                    "Struggles with time organization",
                    "Values creativity and drive",
                    "Wants both business and beauty support"
                ],
                nextSteps: "Implement time-blocking systems and productivity tools. Consider hiring support for tasks outside your zone of genius so you can focus on creative, high-impact activities."
            },
            "The Editor": {
                description: "You want both business and beauty support while being confident at home. You're early in your business journey with visibility or confidence challenges. You want to be seen and confident.",
                traits: [
                    "Strong home life foundation",
                    "Early-stage business with growth potential",
                    "Visibility and confidence challenges",
                    "Desires to be seen and confident",
                    "Seeks comprehensive support"
                ],
                nextSteps: "Work on visibility strategies and confidence-building activities. Start with small, consistent actions to build your online presence and practice sharing your expertise."
            },
            "The Supermodel": {
                description: "You're focused on business clarity and feel confident in everything. You're at any business stage but need goal clarity. You want to be seen as confident and driven.",
                traits: [
                    "High confidence across all life areas",
                    "Strong business focus and clarity needs",
                    "Goal-setting and clarity challenges",
                    "Driven and confident presence",
                    "Ready for high-level strategic support"
                ],
                nextSteps: "Create a clear 90-day strategic plan with specific, measurable goals. Consider working with a high-level business strategist to maximize your potential and accelerate growth."
            },
            "No archetype match": {
                description: "Your responses don't match any of our current archetypes. This could indicate you have a unique combination of needs that doesn't fit our current categories.",
                traits: [
                    "Unique combination of needs",
                    "May benefit from personalized assessment",
                    "Doesn't fit standard categories",
                    "Requires customized approach"
                ],
                nextSteps: "Consider a one-on-one consultation to create a personalized action plan that addresses your specific combination of needs and goals."
            }
        };

        // Share results function
        function shareResults() {
            const archetype = document.getElementById('archetypeName').textContent;
            const text = `I just discovered I'm "${archetype}" in this business archetype quiz! Take the quiz to find your archetype.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'My Business Archetype Results',
                    text: text,
                    url: window.location.href
                });
            } else {
                // Fallback - copy to clipboard
                navigator.clipboard.writeText(text + ' ' + window.location.href).then(() => {
                    alert('Results copied to clipboard!');
                });
            }
        }

        // Form submission handler
        document.getElementById('archetypeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get single-answer questions
            const formData = new FormData(this);
            const q2 = formData.get('q2');
            const q3 = formData.get('q3');
            const q5 = formData.get('q5');
            const q6 = formData.get('q6');
            
            // Get Q1 answer (radio button)
            const q1 = formData.get('q1');
            
            const q4Checkboxes = document.querySelectorAll('input[name="q4"]:checked');
            const q4 = Array.from(q4Checkboxes).map(cb => cb.value);
            
            // Check if all questions are answered
            if (!q1 || !q2 || !q3 || q4.length === 0 || !q5 || !q6) {
                alert('Please answer all questions before submitting.');
                return;
            }
            
            // Calculate archetype
            const archetype = calculateArchetype(q1, q2, q3, q4, q5, q6);
            
            // Debug: log the responses and result
            console.log('Quiz responses:', {q1, q2, q3, q4, q5, q6});
            console.log('Calculated archetype:', archetype);
            
            // Only store quiz data and show Flodesk form if we have a valid archetype
            if (archetype !== "No archetype match") {
                // Store quiz data for Flodesk form
                const quizData = {
                    q1: q1,
                    q2: q2, 
                    q3: q3,
                    q4: q4,
                    q5: q5,
                    q6: q6,
                    archetype: archetype,
                    timestamp: new Date().toISOString()
                };
                
                // Store in session storage for Flodesk form
                sessionStorage.setItem('quizData', JSON.stringify(quizData));
                
                // Scroll to Flodesk form and populate hidden fields
                populateFlodeskForm(quizData);
                document.querySelector('.flodesk-section').scrollIntoView({ behavior: 'smooth' });
                
                // Hide the quiz form
                document.getElementById('archetypeForm').style.display = 'none';
                
                // Show success message
                showQuizCompletedMessage(archetype);
                
            } else {
                alert(`Debug: No archetype match found.\nResponses: Q1=${q1}, Q2=${q2}, Q3=${q3}, Q4=[${q4.join(',')}], Q5=${q5}, Q6=${q6}`);
            }
        });

        // Enable submit button only when all questions are answered
        const form = document.getElementById('archetypeForm');
        const submitBtn = document.querySelector('.submit-btn');
        
        function checkFormCompletion() {
            const formData = new FormData(form);
            const q4Checkboxes = document.querySelectorAll('input[name="q4"]:checked');
            
            const allAnswered = formData.get('q1') && formData.get('q2') && 
                              formData.get('q3') && q4Checkboxes.length > 0 && 
                              formData.get('q5') && formData.get('q6');
            
            submitBtn.disabled = !allAnswered;
            console.log('Form completion check:', allAnswered); // Debug log
        }
        
        // Add event listeners to all form inputs
        form.addEventListener('change', function(e) {
            console.log('Form changed:', e.target.name, e.target.value); // Debug log
            checkFormCompletion();
        });
        
        // Initial check
        submitBtn.disabled = true;
        checkFormCompletion();

        // Function to populate Flodesk form with quiz data
        function populateFlodeskForm(quizData) {
            // Wait for Flodesk form to load, then add hidden fields
            setTimeout(() => {
                const flodeskContainer = document.getElementById('fd-form-689e112803c67004d676162c');
                if (flodeskContainer) {
                    // Create hidden fields for quiz data
                    const hiddenFields = [
                        { name: 'archetype', value: quizData.archetype },
                        { name: 'quiz_responses', value: JSON.stringify(quizData) },
                        { name: 'q1', value: quizData.q1 },
                        { name: 'q2', value: quizData.q2 },
                        { name: 'q3', value: quizData.q3 },
                        { name: 'q4', value: Array.isArray(quizData.q4) ? quizData.q4.join(', ') : quizData.q4 },
                        { name: 'q5', value: quizData.q5 },
                        { name: 'q6', value: quizData.q6 },
                        { name: 'completed_date', value: new Date().toLocaleDateString() }
                    ];

                    // Find the form within the Flodesk container
                    const flodeskForm = flodeskContainer.querySelector('form');
                    if (flodeskForm) {
                        hiddenFields.forEach(field => {
                            const hiddenInput = document.createElement('input');
                            hiddenInput.type = 'hidden';
                            hiddenInput.name = field.name;
                            hiddenInput.value = field.value;
                            flodeskForm.appendChild(hiddenInput);
                        });
                        
                        // Add submission handler to redirect to results page
                        flodeskForm.addEventListener('submit', function(e) {
                            setTimeout(() => {
                                // Redirect to results page after form submission
                                const quizData = JSON.parse(sessionStorage.getItem('quizData'));
                                const responsesString = encodeURIComponent(JSON.stringify(quizData));
                                window.location.href = `results.html?archetype=${encodeURIComponent(quizData.archetype)}&responses=${responsesString}`;
                            }, 1000); // Small delay to ensure form submission completes
                        });
                        
                        console.log('Quiz data added to Flodesk form:', quizData);
                    }
                }
            }, 1000); // Wait 1 second for Flodesk form to fully load
        }

        // Function to show quiz completion message
        function showQuizCompletedMessage(archetype) {
            const completionMessage = document.createElement('div');
            completionMessage.style.cssText = `
                background: linear-gradient(135deg, #4caf50, #45a049);
                color: white;
                padding: 30px;
                border-radius: 8px;
                text-align: center;
                margin-bottom: 30px;
                box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            `;
            completionMessage.innerHTML = `
                <div style="font-size: 2.5em; margin-bottom: 15px;">🎉</div>
                <h3 style="font-family: 'Oswald', sans-serif; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px;">Quiz Complete!</h3>
                <p style="font-size: 1.1em; margin-bottom: 10px;">Your archetype is: <strong>${archetype}</strong></p>
                <p style="font-size: 1em; opacity: 0.9;">Enter your details below to get your complete personalized breakdown!</p>
            `;
            
            // Insert before the Flodesk section
            const flodeskSection = document.querySelector('.flodesk-section');
            flodeskSection.parentNode.insertBefore(completionMessage, flodeskSection);
        }
        
        // Debug toggle functionality
        document.getElementById('toggleDebug').addEventListener('click', function() {
            const debugCombinations = document.getElementById('debugCombinations');
            const toggleButton = document.getElementById('toggleDebug');
            
            if (debugCombinations.style.display === 'none') {
                debugCombinations.style.display = 'block';
                toggleButton.textContent = '🐛 Hide Debug - Answer Combinations';
            } else {
                debugCombinations.style.display = 'none';
                toggleButton.textContent = '🐛 Show Debug - Answer Combinations for Each Archetype';
            }
        });
    </script>
</body>
</html>