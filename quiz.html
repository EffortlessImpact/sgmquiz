<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Aligned Visibility Quiz - Discover Your Business Archetype</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A">
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--backdrop-color);
            min-height: 100vh;
            color: var(--font-color);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .quiz-page h1 {
            font-family: 'Oswald', sans-serif;
            font-size: 3em;
            font-weight: 700;
            color: var(--font-color);
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-family: 'Open Sans', sans-serif;
            font-size: 1.4em;
            color: var(--link-color);
            text-align: center;
            margin-bottom: 40px;
            font-weight: 400;
        }
        
        /* Results Page Styles */
        .results-page {
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .results-header h1 {
            font-family: 'Oswald', sans-serif;
            color: var(--font-color);
            margin-bottom: 20px;
            font-size: 2.2em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .archetype-badge {
            background: var(--primary-color);
            color: white;
            padding: 20px 40px;
            border-radius: 4px;
            display: inline-block;
            margin: 10px 0;
            box-shadow: 0 4px 12px rgba(96, 125, 139, 0.3);
        }
        
        .archetype-badge h2 {
            margin: 0;
            font-size: 2em;
            font-weight: bold;
        }
        
        .archetype-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .description-section,
        .traits-section,
        .next-steps-section,
        .cta-section {
            background: var(--canvas-color);
            padding: 30px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .description-section h3,
        .traits-section h3,
        .next-steps-section h3,
        .cta-section h3 {
            font-family: 'Oswald', sans-serif;
            color: var(--font-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #traitsList {
            list-style: none;
            padding: 0;
        }
        
        #traitsList li {
            background: var(--canvas-color);
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 4px;
            border-left: 3px solid var(--primary-color);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: var(--font-color);
        }
        
        .cta-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .cta-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            flex: 1;
            min-width: 150px;
        }
        
        .cta-btn:hover {
            transform: translateY(-2px);
        }
        
        .cta-btn.primary {
            background: var(--primary-color);
            color: white;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .cta-btn.secondary {
            background: var(--canvas-color);
            color: var(--primary-color);
            border: 2px solid var(--secondary-dark);
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .confirmation-notice {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .check-icon {
            font-size: 2em;
        }
        
        .confirmation-notice p {
            margin: 0;
        }
        
        .question {
            margin-bottom: 35px;
            padding: 30px;
            background: var(--canvas-color);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .question h3 {
            font-family: 'Oswald', sans-serif;
            color: var(--font-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .options {
            margin-top: 15px;
        }
        
        .option {
            margin: 12px 0;
            display: flex;
            align-items: center;
        }
        
        .option input[type="radio"],
        .option input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
            accent-color: var(--primary-color);
        }
        
        .option label {
            cursor: pointer;
            padding: 8px 0;
            flex: 1;
        }
        
        .option label {
            color: var(--font-color);
        }
        
        .option label:hover {
            color: var(--primary-color);
        }
        
        .submit-btn {
            display: block;
            width: 100%;
            padding: 18px 45px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 40px;
            box-shadow: 0 4px 12px rgba(96, 125, 139, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.7s;
        }
        
        .submit-btn:hover {
            background: var(--primary-dark);
            box-shadow: 0 6px 16px rgba(96, 125, 139, 0.4);
        }
        
        .submit-btn:hover:before {
            left: 100%;
        }
        
        .submit-btn:disabled {
            background: var(--secondary-dark);
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .submit-btn:disabled:before {
            display: none;
        }
        
        .form-submit {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid var(--canvas-color);
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .result h2 {
            margin-top: 0;
            font-size: 2em;
        }
        
        .result p {
            font-size: 1.1em;
            margin-bottom: 0;
        }
        
        .no-match {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
        }
        
        header {
            text-align: center;
            padding: 0;
            animation: fadeInDown 0.8s ease-out;
            position: relative;
        }
        
        .banner {
            width: 100%;
            height: 400px;
            margin: 0;
            border-radius: 0;
            overflow: hidden;
            box-shadow: none;
            position: relative;
            background: linear-gradient(rgba(96, 125, 139, 0.7), rgba(84, 110, 122, 0.7));
        }
        
        .banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0.8;
        }
        
        .logo-overlay {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }
        
        .logo-overlay img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }
        
        .hero {
            background: var(--canvas-color);
            border-radius: 0;
            padding: 80px 60px 60px;
            margin: 0;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: none;
            animation: fadeInUp 0.8s ease-out 0.2s both;
            position: relative;
        }
        
        .badge {
            display: inline-block;
            background: rgba(96, 125, 139, 0.1);
            color: #607d8b;
            padding: 6px 16px;
            border-radius: 3px;
            font-family: 'Oswald', sans-serif;
            font-size: 0.85em;
            font-weight: 500;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .debug {
            margin-top: 20px;
            padding: 15px;
            background: #edf2f7;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9em;
            display: none;
        }
        
        
        @media (max-width: 768px) {
            .quiz-page h1 {
                font-size: 2em;
            }
            
            .subtitle {
                font-size: 1.1em;
            }
            
            .hero {
                padding: 60px 20px 40px;
                margin-top: 60px;
            }
            
            .submit-btn {
                padding: 15px 40px;
                font-size: 1.1em;
            }
            
            .logo-overlay {
                left: 50%;
                transform: translateX(-50%);
                width: 70px;
                height: 70px;
                bottom: -35px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="banner">
                <img src="sgm-archetype-quiz-banner.jpg" alt="The Aligned Visibility Quiz - Woman in peaceful meditation">
            </div>
            <div class="logo-overlay">
                <img src="Beige-and-White-Aesthetic-Minimalist-Modern-Typography-Beauty-Brand-Logo.png" alt="The Aligned Visibility Quiz Logo">
            </div>
        </header>
        
        <main class="hero quiz-page">
            <div class="badge">5-Minute Quiz</div>
            <h1>The Aligned Visibility Quiz</h1>
            <p class="subtitle">Discover Your Business Archetype & Unlock Your Authentic Presence</p>
            
            <form id="archetypeForm" netlify name="archetype-quiz">
                <!-- Hidden fields for Netlify to capture results -->
                <input type="hidden" name="calculated-archetype" id="calculatedArchetype">
                <input type="hidden" name="all-responses" id="allResponses">
                
                <div class="question">
                    <h3>1. Are you looking for support in:</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q1a" name="q1" value="A">
                            <label for="q1a">Business clarity & direction</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q1b" name="q1" value="B">
                            <label for="q1b">Beauty & visibility support</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q1c" name="q1" value="C">
                            <label for="q1c">Both</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>2. Where do you feel most confident in life currently?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q2a" name="q2" value="A">
                            <label for="q2a">Home life, kids, family, hobbies</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q2b" name="q2" value="B">
                            <label for="q2b">Personal appearance and health</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q2c" name="q2" value="C">
                            <label for="q2c">Career and skills</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q2d" name="q2" value="D">
                            <label for="q2d">Everything!</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>3. What stage of business are you currently in?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q3a" name="q3" value="A">
                            <label for="q3a">Idea stage / just getting started</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q3b" name="q3" value="B">
                            <label for="q3b">Recently launched</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q3c" name="q3" value="C">
                            <label for="q3c">Been in business a while, but need new direction</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q3d" name="q3" value="D">
                            <label for="q3d">Other</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>4. What's feeling unclear, overwhelming, or jumbled right now? (Select all that apply)</h3>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="q4a" name="q4" value="A">
                            <label for="q4a">My goals</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4b" name="q4" value="B">
                            <label for="q4b">Organizing my time</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4c" name="q4" value="C">
                            <label for="q4c">Visibility</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4d" name="q4" value="D">
                            <label for="q4d">My confidence</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="q4e" name="q4" value="E">
                            <label for="q4e">All of the above</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>5. How do you want to be seen in business?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q5a" name="q5" value="A">
                            <label for="q5a">Calm and grounded</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q5b" name="q5" value="B">
                            <label for="q5b">Seen and confident</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q5c" name="q5" value="C">
                            <label for="q5c">Creative and inspired</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q5d" name="q5" value="D">
                            <label for="q5d">Focused and Driven</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>6. Would you like this session to include beauty/appearance-based guidance?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="q6a" name="q6" value="A">
                            <label for="q6a">Yes</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q6b" name="q6" value="B">
                            <label for="q6b">No</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="q6c" name="q6" value="C">
                            <label for="q6c">Maybe</label>
                        </div>
                    </div>
                </div>

            </form>

            <!-- Kit.com Forms - All embedded, hidden by default -->
            <div id="kitForm" style="display: none;">
                <h2>Quiz Complete!</h2>
                <p>Your Archetype: <span id="archetypeName">The [Archetype]</span></p>
                
                
                <!-- Muse Form -->
                <div id="museForm" style="display: none;">
                    <div id="museFormContainer" style="min-height: 400px; padding: 20px; border: 2px solid #ccc; background: #f9f9f9; margin: 20px 0;"></div>
                </div>
                
                
                <!-- Stylist Form -->
                <div id="stylistForm" style="display: none;">
                    <!-- TODO: Add Stylist form script here -->
                    <p>Stylist form coming soon!</p>
                </div>
                
                <!-- Editor Form -->
                <div id="editorForm" style="display: none;">
                    <!-- TODO: Add Editor form script here -->
                    <p>Editor form coming soon!</p>
                </div>
                
                <!-- Supermodel Form -->
                <div id="supermodelForm" style="display: none;">
                    <!-- TODO: Add Supermodel form script here -->
                    <p>Supermodel form coming soon!</p>
                </div>
            </div>
            

                
            
            <!-- Debug Section for Testing -->
            <div class="debug-section" style="margin-top: 40px; position: relative; z-index: 10;">
                <button type="button" id="toggleDebug" class="debug-toggle" style="background: #eceff1; border: 1px solid #cfd8dc; padding: 10px 20px; border-radius: 4px; cursor: pointer; color: #607d8b; font-family: 'Open Sans', sans-serif; position: relative; z-index: 11;">
                    🐛 Show Debug - Answer Combinations for Each Archetype
                </button>
                <div id="debugCombinations" class="debug-combinations" style="display: none; margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 4px; font-family: monospace; font-size: 0.9em; line-height: 1.6;">
                    <h3 style="font-family: 'Oswald', sans-serif; color: #607d8b; margin-bottom: 20px;">Answer Combinations to Get Each Archetype:</h3>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">🎨 The Muse:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> B (Beauty & visibility support)</li>
                            <li><strong>Q2:</strong> A (Home/family life)</li>
                            <li><strong>Q3:</strong> A (Idea stage) OR B (Recently launched)</li>
                            <li><strong>Q4:</strong> E (All of the above - feeling overwhelmed!)</li>
                            <li><strong>Q5:</strong> A (Calm and grounded)</li>
                            <li><strong>Q6:</strong> A (Yes, absolutely!) OR C (Maybe...)</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">💄 The Stylist:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> C (Both business clarity and beauty support)</li>
                            <li><strong>Q2:</strong> B (Personal appearance)</li>
                            <li><strong>Q3:</strong> C (Established and growing)</li>
                            <li><strong>Q4:</strong> B (Managing my time effectively)</li>
                            <li><strong>Q5:</strong> C (Creative and expressive) OR D (Driven and strategic)</li>
                            <li><strong>Q6:</strong> B (Not really) OR C (Maybe...)</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">✏️ The Editor:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> C (Both business clarity and beauty support)</li>
                            <li><strong>Q2:</strong> A (Home/family life)</li>
                            <li><strong>Q3:</strong> A (Idea stage) OR B (Recently launched)</li>
                            <li><strong>Q4:</strong> C (Being visible and putting myself out there) OR D (Confidence in my abilities)</li>
                            <li><strong>Q5:</strong> B (Confident and polished)</li>
                            <li><strong>Q6:</strong> A (Yes, absolutely!)</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #546e7a; margin-bottom: 10px;">👑 The Supermodel:</h4>
                        <ul style="margin-left: 20px; color: #37474f;">
                            <li><strong>Q1:</strong> A (Business clarity and strategy)</li>
                            <li><strong>Q2:</strong> D (Everything - I feel confident across the board)</li>
                            <li><strong>Q3:</strong> A (Idea stage) OR B (Recently launched) OR C (Established and growing)</li>
                            <li><strong>Q4:</strong> A (Clarifying my goals and direction)</li>
                            <li><strong>Q5:</strong> B (Confident and polished) OR D (Driven and strategic)</li>
                            <li><strong>Q6:</strong> A (Yes, absolutely!)</li>
                        </ul>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 4px; margin-top: 20px;">
                        <p style="margin: 0; color: #2e7d32;"><strong>💡 Testing Tip:</strong> If exact combinations don't match, the quiz uses a scoring system to find the best fit archetype based on your answers.</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Results Page - Hidden initially -->
        <div id="resultsPage" class="results-page" style="display: none;">
            <div class="results-header">
                <h1>Your Archetype Results</h1>
                <div class="archetype-badge">
                    <h2 id="archetypeName"></h2>
                </div>
            </div>

            <div class="archetype-content">
                <div class="description-section">
                    <h3>About Your Archetype</h3>
                    <p id="archetypeDescription"></p>
                </div>

                <div class="traits-section">
                    <h3 id="traitsTitle">Key Traits</h3>
                    <ul id="traitsList"></ul>
                </div>

                <div class="cta-section">
                    <h3>Check Your Email</h3>
                    <p>Your complete archetype guide is on its way!</p>
                </div>

                <div class="confirmation-notice">
                    <div class="check-icon">✅</div>
                    <p><strong>Quiz Complete!</strong><br>Check your email for detailed results.</p>
                </div>
            </div>
        </div>
        
        <div id="debug" class="debug">
            <strong>Debug Info:</strong><br>
            <span id="debugInfo"></span>
        </div>
        
    </div>

    <script>
        // Debug logging functions
        function addToDebugLog(message) {
            console.log(message);
        }
        
        function addToDebugLogError(message) {
            console.error(message);
        }
        
        function addToDebugLogSuccess(message) {
            console.log(message);
        }
        
        // Function to show archetype-specific Kit.com forms
        function showArchetypeForm(archetype) {

            
            // Show the specific form based on archetype
            switch(archetype) {
                case 'Muse':
                    document.getElementById('museForm').style.display = 'block';
                    console.log('Showing Muse form');
                    // Load Kit.com script after making container visible
                    loadKitForm('museFormContainer', '3ef77c7753');
                    break;
                case 'Stylist':
                    document.getElementById('stylistForm').style.display = 'block';
                    console.log('Showing Stylist form (placeholder)');
                    break;
                case 'Editor':
                    document.getElementById('editorForm').style.display = 'block';
                    console.log('Showing Editor form (placeholder)');
                    break;
                case 'Supermodel':
                    document.getElementById('supermodelForm').style.display = 'block';
                    console.log('Showing Supermodel form (placeholder)');
                    break;
                default:
                    console.error('Unknown archetype:', archetype);
                    document.getElementById('museForm').style.display = 'block'; // Default to Muse
                    loadKitForm('museFormContainer', '3ef77c7753');
                    break;
            }
        }
        
        // Function to monitor and maintain form visibility
        function monitorFormVisibility(archetype) {
            const formId = archetype.toLowerCase() + 'Form';
            const formElement = document.getElementById(formId);
            
            if (!formElement) {
                console.error('Form element not found:', formId);
                return;
            }
            
            // Check every 500ms for 10 seconds
            let checkCount = 0;
            const maxChecks = 20;
            
            const visibilityChecker = setInterval(() => {
                checkCount++;
                
                if (formElement.style.display === 'none') {
                    console.warn(`Form ${formId} became hidden, re-showing it`);
                    formElement.style.display = 'block';
                }
                
                if (checkCount >= maxChecks) {
                    clearInterval(visibilityChecker);
                    console.log('Form visibility monitoring stopped');
                }
            }, 500);
            
            console.log(`Started monitoring visibility for ${formId}`);
        }
        
        // Function to dynamically load Kit.com form script
        function loadKitForm(containerId, dataUid) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error('Container not found:', containerId);
                return;
            }
            
            // Check if script already loaded
            if (container.querySelector('script')) {
                console.log('Kit.com script already loaded for container:', containerId);
                return;
            }
            
            // Add a small delay to ensure container is fully visible
            setTimeout(() => {
                // Create and append the script
                const script = document.createElement('script');
                script.async = true;
                script.setAttribute('data-uid', dataUid);
                script.src = `https://stephanie-g-m-beauty.kit.com/${dataUid}/index.js`;
                
                // Add onload handler to debug
                script.onload = function() {
                    console.log(`Kit.com script loaded successfully for ${containerId}`);
                    
                    // Debug what Kit.com actually created
                    setTimeout(() => {
                        const container = document.getElementById(containerId);
                        console.log('Container innerHTML after Kit.com load:', container.innerHTML.substring(0, 200) + '...');
                        console.log('Container children count:', container.children.length);
                        
                        // Check if any form elements were created
                        const forms = container.querySelectorAll('form');
                        console.log('Forms found in container:', forms.length);
                        
                        if (forms.length > 0) {
                            const form = forms[0];
                            console.log('First form display:', window.getComputedStyle(form).display);
                            console.log('First form visibility:', window.getComputedStyle(form).visibility);
                            console.log('First form opacity:', window.getComputedStyle(form).opacity);
                            console.log('First form height:', window.getComputedStyle(form).height);
                            console.log('First form class:', form.className);
                            
                            // Force the Kit.com form to be visible if it's hidden
                            if (window.getComputedStyle(form).display === 'none') {
                                // Try multiple approaches to force visibility
                                form.style.setProperty('display', 'block', 'important');
                                form.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                                form.setAttribute('style', 'display: block !important; visibility: visible !important; opacity: 1 !important;');
                                
                                // Remove any classes that might be hiding it
                                if (form.classList.contains('hidden')) {
                                    form.classList.remove('hidden');
                                }
                                
                                console.log('Applied multiple visibility fixes to Kit.com form');
                                
                                // Continuously force visibility for 5 seconds
                                let forceCount = 0;
                                const forceInterval = setInterval(() => {
                                    if (window.getComputedStyle(form).display === 'none') {
                                        form.style.setProperty('display', 'block', 'important');
                                        console.log('Re-forcing form visibility, attempt:', forceCount + 1);
                                    }
                                    
                                    forceCount++;
                                    if (forceCount >= 10) { // Stop after 5 seconds
                                        clearInterval(forceInterval);
                                        console.log('Final form display:', window.getComputedStyle(form).display);
                                        
                                        // Add form submission debugging
                                        form.addEventListener('submit', function(e) {
                                            console.log('Kit.com form submission detected');
                                            console.log('Form action:', form.action);
                                            console.log('Form method:', form.method);
                                            
                                            const formData = new FormData(form);
                                            console.log('Form data being submitted:');
                                            for (let [key, value] of formData.entries()) {
                                                console.log(`  ${key}: ${value}`);
                                            }
                                        });
                                    }
                                }, 500);
                            }
                        }
                        
                        // Ensure parent stays visible
                        const parentForm = document.getElementById('museForm');
                        console.log('Parent form display style:', parentForm.style.display);
                        console.log('Parent form computed display:', window.getComputedStyle(parentForm).display);
                        
                        if (parentForm && parentForm.style.display === 'none') {
                            parentForm.style.display = 'block';
                            console.log('Re-showing parent form after Kit.com load');
                        }
                    }, 1000); // Give Kit.com time to render
                };
                
                script.onerror = function() {
                    console.error('Failed to load Kit.com script for', containerId);
                };
                
                container.appendChild(script);
                console.log(`Kit.com script loading for ${containerId} with uid: ${dataUid}`);
            }, 100); // Small delay to ensure DOM is ready
        }
        
        // Archetype calculation function
        function calculateArchetype(q1, q2, q3, q4, q5, q6) {
            // Convert q1 and q4 to arrays if they're not already
            const q1Array = Array.isArray(q1) ? q1 : [q1];
            const q4Array = Array.isArray(q4) ? q4 : [q4];
            
            // Helper function to check if array contains value
            function contains(arr, value) {
                return arr.includes(value);
            }
            
            // Rule 1: Muse - Beauty/visibility support, home focused, early stage, overwhelmed, calm
            if (contains(q1Array, "B") && q2 === "A" && (q3 === "A" || q3 === "B") && 
                contains(q4Array, "E") && q5 === "A" && (q6 === "A" || q6 === "C")) {
                return "Muse";
            }
            
            // Rule 2: Stylist - Comprehensive support, appearance confident, established, time issues, creative/driven
            if (contains(q1Array, "C") && q2 === "B" && q3 === "C" && contains(q4Array, "B") &&
                (q5 === "C" || q5 === "D") && (q6 === "C" || q6 === "B")) {
                return "Stylist";
            }
            
            // Rule 3: Editor - Both support, home confident, early stage, visibility/confidence issues, confident image, beauty guidance
            if (contains(q1Array, "C") && q2 === "A" && (q3 === "A" || q3 === "B") &&
                (contains(q4Array, "C") || contains(q4Array, "D")) && q5 === "B" && q6 === "A") {
                return "Editor";
            }
            
            // Rule 4: Supermodel - Business clarity, confident in everything, goal issues, confident/driven image, beauty guidance
            if (contains(q1Array, "A") && q2 === "D" && (q3 === "A" || q3 === "B" || q3 === "C") &&
                contains(q4Array, "A") && (q5 === "B" || q5 === "D") && q6 === "A") {
                return "Supermodel";
            }
            
            // Fallback logic - score based approach if no exact match
            let scores = {
                "Muse": 0,
                "Stylist": 0,
                "Editor": 0,
                "Supermodel": 0
            };
            
            // Score for Muse (beauty focus, home confident, early stage, overwhelmed)
            if (contains(q1Array, "B")) scores["Muse"] += 2;
            if (q2 === "A") scores["Muse"] += 2;
            if (q3 === "A" || q3 === "B") scores["Muse"] += 1;
            if (contains(q4Array, "E")) scores["Muse"] += 2;
            if (q5 === "A") scores["Muse"] += 1;
            if (q6 === "A" || q6 === "C") scores["Muse"] += 1;
            
            // Score for Stylist (comprehensive, appearance confident, established, time issues)
            if (contains(q1Array, "C")) scores["Stylist"] += 2;
            if (q2 === "B") scores["Stylist"] += 2;
            if (q3 === "C") scores["Stylist"] += 2;
            if (contains(q4Array, "B")) scores["Stylist"] += 2;
            if (q5 === "C" || q5 === "D") scores["Stylist"] += 1;
            
            // Score for Editor (both support, home confident, visibility issues)
            if (contains(q1Array, "C")) scores["Editor"] += 2;
            if (q2 === "A") scores["Editor"] += 2;
            if (q3 === "A" || q3 === "B") scores["Editor"] += 1;
            if (contains(q4Array, "C") || contains(q4Array, "D")) scores["Editor"] += 2;
            if (q5 === "B") scores["Editor"] += 1;
            if (q6 === "A") scores["Editor"] += 1;
            
            // Score for Supermodel (business clarity, highly confident, goal-focused)
            if (contains(q1Array, "A")) scores["Supermodel"] += 2;
            if (q2 === "D") scores["Supermodel"] += 2;
            if (contains(q4Array, "A")) scores["Supermodel"] += 2;
            if (q5 === "B" || q5 === "D") scores["Supermodel"] += 1;
            if (q6 === "A") scores["Supermodel"] += 1;
            
            // Return the archetype with the highest score
            const maxScore = Math.max(...Object.values(scores));
            const bestMatch = Object.keys(scores).find(key => scores[key] === maxScore);
            
            return bestMatch || "Muse"; // Default to Muse if no clear winner
        }


       

        
        // Form submission and Kit.com integration
        document.addEventListener('DOMContentLoaded', function() {
            const quizForm = document.getElementById('archetypeForm');
            const kitForm = document.getElementById('kitForm');
            let calculatedArchetype = '';
            
            // Debug toggle functionality
            const toggleButton = document.getElementById('toggleDebug');
            const debugCombinations = document.getElementById('debugCombinations');
            
            if (toggleButton) {
                toggleButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Debug button clicked!');
                    
                    if (debugCombinations.style.display === 'none' || debugCombinations.style.display === '') {
                        debugCombinations.style.display = 'block';
                        toggleButton.textContent = '🐛 Hide Debug - Answer Combinations';
                        console.log('Showing debug combinations');
                    } else {
                        debugCombinations.style.display = 'none';
                        toggleButton.textContent = '🐛 Show Debug - Answer Combinations for Each Archetype';
                        console.log('Hiding debug combinations');
                    }
                });
                console.log('Debug toggle event listener attached');
            } else {
                console.error('Toggle button not found!');
            }
            
            // Function to check if all questions are answered
            function checkQuizCompletion() {
                const formData = new FormData(quizForm);
                
                // Get answers
                const q1 = formData.get('q1');
                const q2 = formData.get('q2');
                const q3 = formData.get('q3');
                const q4 = formData.getAll('q4'); // Array for checkboxes
                const q5 = formData.get('q5');
                const q6 = formData.get('q6');
                
                // Check if all questions are answered
                if (q1 && q2 && q3 && q4.length > 0 && q5 && q6) {
                    console.log('Quiz answers:', { q1, q2, q3, q4, q5, q6 });
                    
                    // Calculate archetype
                    calculatedArchetype = calculateArchetype(q1, q2, q3, q4, q5, q6);
                    console.log('Calculated archetype:', calculatedArchetype);
                    
                    // No need to populate archetype field - each form is specific to the archetype
                    
                    // Update the archetype display in the form
                    const archetypeNameElement = document.getElementById('archetypeName');
                    if (archetypeNameElement) {
                        archetypeNameElement.textContent = `The ${calculatedArchetype}`;
                    }
                    
                    // Let Kit.com handle success messages and redirects naturally
                    
                    // Show Kit.com form section
                    kitForm.style.display = 'block';
                    
                    // Show archetype-specific Kit.com form
                    showArchetypeForm(calculatedArchetype);
                    
                    // Monitor form visibility
                    monitorFormVisibility(calculatedArchetype);
                    
                    // Scroll to the Kit.com form
                    kitForm.scrollIntoView({ behavior: 'smooth' });
                    
                    console.log(`Quiz completed, loading form for: ${calculatedArchetype}`);
                }
            }
            
            // Add event listeners to all form inputs to check completion on change
            if (quizForm) {
                const inputs = quizForm.querySelectorAll('input[type="radio"], input[type="checkbox"]');
                inputs.forEach(input => {
                    input.addEventListener('change', checkQuizCompletion);
                });
            }
            
            // Kit.com will handle form submission naturally - no interference needed
        });
    </script>
</body>
</html>